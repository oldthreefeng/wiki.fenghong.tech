<!DOCTYPE HTML>
<html>
  <head>
    <link rel="Stylesheet" type="text/css" href="/static/css/style.css">
    <link rel="Stylesheet" type="text/css" href="/static/css/tango.css">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="alternate" type="application/atom+xml" href="atom.xml" title="Atom feed">
    <title>Collection - Wiki · Louis</title>
    <meta name="keywords" content=""/>
    <meta name="description" content=""/>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  </head>

  <body>
    <div id="container">
      
<div id="header">
  <div class="post-nav"><a href="/">Home</a>&nbsp;&#187;&nbsp;<a href="/#intro">intro</a>&nbsp;&#187;&nbsp;Collection
    <span class="updated">Page Updated&nbsp;
      2018-11-08 16:48
    </span></div>
</div>
<div class="clearfix"></div>

<div class="page_title">Collection</div>

  <h2 id="_1">三层结构</h2>
<p><em>(1.6.0版本引入)</em></p>
<p>Simiki使用三层结构模式来管理个人文档目录(content目录)：</p>
<ol>
<li>目录(category)：第一层结构，按文件夹存放，用于初步的分类。比如Linux、Python、工具等等。</li>
<li>集合(collection)：第二层结构，在页面(page)的meta中定义（关键字: <code>collection</code>），用于进一步的分类，效果上和子目录一样。一个页面只能属于一个集合。</li>
<li>标签(tag)：第三层结构，在页面(page)的meta中定义（关键字：<code>tag</code>）。一个页面可以有多个tags。</li>
</ol>
<p>这样的结构能满足绝大多数个人维基用户的需求，并且管理维护也清晰简单。</p>
<blockquote>
<p><em>注意</em>：集合是目录的子集，同一个目录下，配置了相同了集合名，才会认为是同一个集合，跨目录的集合没有任何关联性；且一个页面(page)只能属于一个集合。比如在工具目录下，有Git的文档，也有SVN的文档，增加一个集合「版本控制管理」给两者，可以使两者具有关联性。具体见下面的详细介绍。</p>
<p>对于<code>content</code>目录，新主题<code>simple2</code>放弃支持传统的多级目录结构。因为：</p>
<ul>
<li>个人维基很少需要这样的多级目录来存放文档文件</li>
<li>降低生成器的复杂度</li>
<li>降低主题开发的复杂度</li>
</ul>
<p>但是我们以后可能会增加多级目录和集合并存的结构，不过目前来看，暂时还没有这个计划。如果想要支持对多级目录支持的主题，可以参考第一版的主题<a href="https://github.com/tankywoo/simiki/tree/master/simiki/themes/simple">simple</a>。</p>
</blockquote>
<hr />
<p>下面是详细的介绍：</p>
<h3 id="collection">集合(collection)</h3>
<p>比如content目录如下：</p>
<div class="hlcode"><pre><span class="n">tree</span> <span class="n">content</span>
<span class="n">content</span>
<span class="err">├──</span> <span class="n">linux</span>
<span class="err">│</span>   <span class="err">└──</span> <span class="n">other2</span><span class="p">.</span><span class="n">md</span>
<span class="err">└──</span> <span class="n">tool</span>
    <span class="err">├──</span> <span class="n">git</span><span class="p">.</span><span class="n">md</span>
    <span class="err">├──</span> <span class="n">other1</span><span class="p">.</span><span class="n">md</span>
    <span class="err">└──</span> <span class="n">svn</span><span class="p">.</span><span class="n">md</span>
</pre></div>


<p>现在没有定义集合，生成的<code>pages</code>结构如下（无关字段已省略）：</p>
<div class="hlcode"><pre><span class="cp">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;linux&quot;</span><span class="p">,</span>        <span class="err">#</span> <span class="err">目录名</span>
    <span class="s2">&quot;pages&quot;</span><span class="p">:</span> <span class="err">[</span>
      <span class="nx">...</span>
    <span class="cp">]</span>
  <span class="err">}</span><span class="o">,</span>
  <span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;tool&quot;</span><span class="o">,</span>        <span class="err">#</span> <span class="err">目录名</span>
    <span class="s2">&quot;pages&quot;</span><span class="o">:</span> <span class="cp">[</span>             <span class="err">#</span> <span class="err">目录下的所有页面和集合</span>
      <span class="p">{</span>
        <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-01-01 00:00&quot;</span><span class="p">,</span>
        <span class="s2">&quot;fname&quot;</span><span class="p">:</span> <span class="s2">&quot;git.md&quot;</span><span class="p">,</span>        <span class="err">#</span> <span class="err">无集合的页面</span>
        <span class="nx">...</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-01-03 00:00&quot;</span><span class="p">,</span>
        <span class="s2">&quot;fname&quot;</span><span class="p">:</span> <span class="s2">&quot;other1.md&quot;</span><span class="p">,</span>
        <span class="nx">...</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-01-02 00:00&quot;</span><span class="p">,</span>
        <span class="s2">&quot;fname&quot;</span><span class="p">:</span> <span class="s2">&quot;svn.md&quot;</span><span class="p">,</span>
        <span class="nx">...</span>
      <span class="p">}</span>
    <span class="cp">]</span>
  <span class="p">}</span>
<span class="o">]</span>
</pre></div>


<p>现在给git.md和svn.md增加相同的集合：</p>
<div class="hlcode"><pre><span class="err">$</span> <span class="n">cat</span> <span class="n">content</span><span class="o">/</span><span class="n">tool</span><span class="o">/</span><span class="p">{</span><span class="n">git</span><span class="p">,</span><span class="n">svn</span><span class="p">}.</span><span class="n">md</span>
<span class="o">---</span>
<span class="nl">title:</span> <span class="s">&quot;Git&quot;</span>
<span class="nl">date:</span> <span class="mi">2016</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">01</span> <span class="mo">00</span><span class="o">:</span><span class="mo">00</span>
<span class="nl">collection:</span> <span class="n">Version</span> <span class="n">Control</span>
<span class="o">---</span>

<span class="o">---</span>
<span class="nl">title:</span> <span class="s">&quot;SVN&quot;</span>
<span class="nl">date:</span> <span class="mi">2016</span><span class="o">-</span><span class="mo">01</span><span class="o">-</span><span class="mo">02</span> <span class="mo">00</span><span class="o">:</span><span class="mo">00</span>
<span class="nl">collection:</span> <span class="n">Version</span> <span class="n">Control</span>
<span class="o">---</span>
</pre></div>


<p>这时<code>pages</code>的结构如下：</p>
<div class="hlcode"><pre><span class="cp">[</span>
  <span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;linux&quot;</span><span class="p">,</span>        <span class="err">#</span> <span class="err">目录名</span>
    <span class="s2">&quot;pages&quot;</span><span class="p">:</span> <span class="err">[</span>
      <span class="nx">...</span>
    <span class="cp">]</span>
  <span class="err">}</span><span class="o">,</span>
  <span class="p">{</span>
    <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;tool&quot;</span><span class="o">,</span>        <span class="err">#</span> <span class="err">目录名</span>
    <span class="s2">&quot;pages&quot;</span><span class="o">:</span> <span class="cp">[</span>             <span class="err">#</span> <span class="err">目录下的所有页面和集合</span>
      <span class="p">{</span>
        <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-01-03 00:00&quot;</span><span class="p">,</span>
        <span class="s2">&quot;fname&quot;</span><span class="p">:</span> <span class="s2">&quot;other1.md&quot;</span><span class="p">,</span>        <span class="err">#</span> <span class="err">无集合的页面</span>
        <span class="nx">...</span>
      <span class="p">},</span>
      <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;Version Control&quot;</span><span class="p">,</span>        <span class="err">#</span> <span class="err">集合名</span>
        <span class="s2">&quot;pages&quot;</span><span class="p">:</span> <span class="err">[</span>                        <span class="err">#</span> <span class="err">集合下的所有页面</span>
          <span class="p">{</span>
            <span class="s2">&quot;collection&quot;</span><span class="p">:</span> <span class="s2">&quot;Version Control&quot;</span><span class="p">,</span>
            <span class="s2">&quot;fname&quot;</span><span class="p">:</span> <span class="s2">&quot;git.md&quot;</span><span class="p">,</span>
            <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-01-01 00:00&quot;</span>
            <span class="nx">...</span>
          <span class="p">},</span>
          <span class="p">{</span>
            <span class="s2">&quot;collection&quot;</span><span class="p">:</span> <span class="s2">&quot;Version Control&quot;</span><span class="p">,</span>
            <span class="s2">&quot;fname&quot;</span><span class="p">:</span> <span class="s2">&quot;svn.md&quot;</span><span class="p">,</span>
            <span class="s2">&quot;date&quot;</span><span class="p">:</span> <span class="s2">&quot;2016-01-02 00:00&quot;</span>
            <span class="nx">...</span>
          <span class="p">}</span>
        <span class="cp">]</span>
      <span class="p">}</span>
    <span class="o">]</span>
  <span class="err">}</span>
<span class="o">]</span>
</pre></div>


<p>可以看到，在同一个目录下，配置了相同的集合(collection)后：</p>
<ul>
<li>同一个目录下，<strong>未配置</strong>集合(collection)的页面(page)和集合是同一级结构</li>
<li>同一个目录下，配置集合(collection)的页面(page)处于集合中更深一级的结构中</li>
</ul>
<h3 id="tag">标签(tag)</h3>
<p>标签使多篇Wiki之间互相有关联性。</p>
<p>如下例子，两篇Wiki，都是和Vim相关的：</p>
<div class="hlcode"><pre><span class="o">==&gt;</span> <span class="n">content</span><span class="o">/</span><span class="n">book</span><span class="o">/</span><span class="n">practical</span><span class="o">-</span><span class="n">vim</span><span class="p">.</span><span class="n">md</span> <span class="o">&lt;==</span>
<span class="o">---</span>
<span class="nl">title:</span> <span class="s">&quot;Practical Vim&quot;</span>
<span class="nl">date:</span> <span class="mi">2014</span><span class="o">-</span><span class="mi">11</span><span class="o">-</span><span class="mi">13</span> <span class="mi">22</span><span class="o">:</span><span class="mi">11</span>
<span class="nl">tag:</span> <span class="n">vim</span>  <span class="err">#</span> <span class="err">以逗号分隔的字符串方式配置</span><span class="n">tag</span>
<span class="o">---</span>

<span class="o">==&gt;</span> <span class="n">content</span><span class="o">/</span><span class="n">tool</span><span class="o">/</span><span class="n">vim</span><span class="p">.</span><span class="n">md</span> <span class="o">&lt;==</span>
<span class="o">---</span>
<span class="nl">title:</span> <span class="s">&quot;Vim&quot;</span>
<span class="nl">date:</span> <span class="mi">2013</span><span class="o">-</span><span class="mi">08</span><span class="o">-</span><span class="mi">17</span> <span class="mo">07</span><span class="o">:</span><span class="mi">32</span>
<span class="nl">tag:</span>  <span class="err">#</span> <span class="err">以列表的方式配置</span><span class="n">tag</span>
  <span class="o">-</span> <span class="n">vim</span>
<span class="o">---</span>
</pre></div>


<p><code>page.relation</code>变量会维护与此页面相关的其它页面信息：</p>
<div class="hlcode"><pre><span class="p">{</span>
    <span class="s1">&#39;filename&#39;</span><span class="o">:</span> <span class="n">u</span><span class="s1">&#39;vim.html&#39;</span><span class="o">,</span>
    <span class="s1">&#39;relation&#39;</span><span class="o">:</span> <span class="cp">[</span>
        <span class="p">{</span>
            <span class="s1">&#39;category&#39;</span><span class="p">:</span> <span class="nx">u</span><span class="s1">&#39;book&#39;</span><span class="p">,</span>
            <span class="s1">&#39;date&#39;</span><span class="p">:</span> <span class="s1">&#39;2014-11-13 22:11&#39;</span><span class="p">,</span>
            <span class="s1">&#39;filename&#39;</span><span class="p">:</span> <span class="nx">u</span><span class="s1">&#39;practical-vim.html&#39;</span><span class="p">,</span>
            <span class="s1">&#39;tag&#39;</span><span class="p">:</span> <span class="err">[</span><span class="s1">&#39;vim&#39;</span><span class="cp">]</span><span class="o">,</span>
            <span class="s1">&#39;title&#39;</span><span class="o">:</span> <span class="s1">&#39;Practical Vim&#39;</span>
        <span class="p">}</span>
    <span class="o">],</span>
    <span class="s1">&#39;tag&#39;</span><span class="o">:</span> <span class="cp">[</span><span class="s1">&#39;vim&#39;</span><span class="cp">]</span><span class="o">,</span>
    <span class="s1">&#39;title&#39;</span><span class="o">:</span> <span class="s1">&#39;Vim&#39;</span><span class="o">,</span>
    <span class="o">...</span>
<span class="err">}</span>
</pre></div>
    </div>
    <div id="footer">
      <span>
        <p>Copyright © 2018 louis.
        Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.</p>
        <p>Site Generated 2018-11-08 17:25:28</p>
      </span>
    </div>

    
    
  </body>
</html>